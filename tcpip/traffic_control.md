## 流量控制
在链路层，每个数据包通过邻居子系统后，都由dev_queue_xmit()来进行输出，然后根据输出网络设备的排队规程来确定是否通过QoS之后发送，还是直接调用网卡驱动注册的发送函数把数据包发送出去。在启用了Qos的情况下，首先将待发送的数据包排入到QoS队列中，然后激活数据包输出软中断，最后在数据包输出软中断例程中，从QoS队列中获取优先级最高的数据包，调用dev_hard_start_xmit函数将数据包输出到网络设备.

![]()
